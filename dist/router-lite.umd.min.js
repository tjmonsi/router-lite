!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";var t="/",e="./",r=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function i(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function n(t){return t.replace(/([=!:$/()])/g,"\\$1")}function a(t){return t&&t.sensitive?"":"i"}function o(o,s,u){return function(r,n,o){for(var s=(o=o||{}).strict,u=!1!==o.end,l=i(o.delimiter||t),h=o.delimiters||e,c=[].concat(o.endsWith||[]).map(i).concat("$").join("|"),d="",f=!1,p=0;p<r.length;p++){var g=r[p];if("string"==typeof g)d+=i(g),f=p===r.length-1&&h.indexOf(g[g.length-1])>-1;else{var b=i(g.prefix),_=g.repeat?"(?:"+g.pattern+")(?:"+b+"(?:"+g.pattern+"))*":g.pattern;n&&n.push(g),g.optional?g.partial?d+=b+"("+_+")?":d+="(?:"+b+"("+_+"))?":d+=b+"("+_+")"}}u?(s||(d+="(?:"+l+")?"),d+="$"===c?"$":"(?="+c+")"):(s||(d+="(?:"+l+"(?="+c+"))?"),f||(d+="(?="+l+"|"+c+")"));return new RegExp("^"+d,a(o))}(function(a,o){for(var s,u=[],l=0,h=0,c="",d=o&&o.delimiter||t,f=o&&o.delimiters||e,p=!1;null!==(s=r.exec(a));){var g=s[0],b=s[1],_=s.index;if(c+=a.slice(h,_),h=_+g.length,b)c+=b[1],p=!0;else{var m="",v=a[h],w=s[2],R=s[3],k=s[4],C=s[5];if(!p&&c.length){var x=c.length-1;f.indexOf(c[x])>-1&&(m=c[x],c=c.slice(0,x))}c&&(u.push(c),c="",p=!1);var y=""!==m&&void 0!==v&&v!==m,A="+"===C||"*"===C,E="?"===C||"*"===C,$=m||d,j=R||k;u.push({name:w||l++,prefix:m,delimiter:$,optional:E,repeat:A,partial:y,pattern:j?n(j):"[^"+i($)+"]+?"})}}return(c||h<a.length)&&u.push(c+a.substr(h)),u}(o,u),s,u)}function s(t,e,r){return t instanceof RegExp?function(t,e){if(!e)return t;var r=t.source.match(/\((?!\?)/g);if(r)for(var i=0;i<r.length;i++)e.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,pattern:null});return t}(t,e):Array.isArray(t)?function(t,e,r){for(var i=[],n=0;n<t.length;n++)i.push(s(t[n],e,r).source);return new RegExp("(?:"+i.join("|")+")",a(r))}(t,e,r):o(t,e,r)}class u extends window.HTMLElement{static get is(){return"router-lite"}static get observedAttributes(){return["fallback-route"]}constructor(){super(),this.__data={},this.__routeInitialized=!1,this._boundChildrenChanged=this._childrenChanged.bind(this),this.routes=[]}connectedCallback(){if(this.fallbackRoute||(this.fallbackRoute="no-page"),this.children)for(let t of Array.from(this.children))this._getRoute(t);this._observer=new window.MutationObserver(this._boundChildrenChanged),this._observer.observe(this,{childList:!0}),this.hasAttribute("fallback-route")&&(this.__data.fallbackRoute=this.getAttribute("fallback-route")),this.__routeInitialized=!0,this._pathChanged(this.path)}disconnectedCallback(){this._observer&&this._observer.disconnect()}set currentRoute(t){this.__data.currentRoute=t,this.setAttribute("current-route",t)}get currentRoute(){return this.__data.currentRoute}set fallbackRoute(t){this.__data.fallbackRoute=t,this.setAttribute("fallback-route",t)}get fallbackRoute(){return this.__data.fallbackRoute}set path(t){this.__data.path=t,this.__routeInitialized&&this._pathChanged(t)}get path(){return this.__data.path}_childrenChanged(t){for(let e of t)if("childList"===e.type&&e.addedNodes)for(let t of Array.from(e.addedNodes))this._getRoute(t)}_getRoute(t){"route-data-lite"===t.nodeName.toLowerCase()?t.route&&"string"==typeof t.route&&t.route.trim()?this.routes.push(t.route):t.hasAttribute("route")&&"string"==typeof t.getAttribute("route")&&t.getAttribute("route").trim()?this.routes.push(t.getAttribute("route")):console.warn("There's no route information found in route-data ",t):console.warn("Only route-data-lite is allowed",t)}_pathChanged(t){let e=null,r=null,i=[];for(let n of this.routes)if(e=(r=s(n,i=[])).exec(t))return this._routeMatched(n,e,i);return this._routeMatched(this.fallbackRoute,[],[])}_routeMatched(t,e,r){const i={};for(let t=0,n=r.length;t<n;t++){let n=r[t],{name:a}=n;i[a]=e[t+1]||null}this.routeParamObject=i,this.currentRoute=t,Promise.resolve().then(()=>{this.dispatchEvent(new window.CustomEvent("route-param-object-change",{detail:this.routeParamObject})),this.dispatchEvent(new window.CustomEvent("current-route-change",{detail:this.currentRoute}))})}attributeChangedCallback(t,e,r){"fallback-route"===t&&this.__data.fallbackRoute!==r&&(this.__data.fallbackRoute=r)}}window.customElements.get(u.is)?console.warn(`${u.is} is already defined somewhere. Please check your code.`):window.customElements.define(u.is,u)});
